language: php
php:
  - '7.1'
  - nightly

env:
  matrix:
    - PREFER_LOWEST="--prefer-lowest"
    - PREFER_LOWEST=""

cache:
  directories:
    - $HOME/.composer/cache/files

install:
  composer update -n --prefer-dist $PREFER_LOWEST

jobs:
  include:
    - stage: check
      php: 7.1
      script: make lint
    - script: make stan
    - stage: test
      script: make test

stages:
  - check
  - test
