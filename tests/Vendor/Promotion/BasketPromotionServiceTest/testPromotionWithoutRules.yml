
-
    request:
        method: GET
        url: 'http://wizaplace.loc/api/v1/users/authenticate'
        headers:
            Host: wizaplace.loc
            Accept-Encoding: null
            Authorization: 'Basic dmVuZG9yQHdvcmxkLWNvbXBhbnkuY29tOldpbmRvd3MuOTg='
            User-Agent: Wizaplace-PHP-SDK/dev-feature-WIZ-8293-discount-on-quantity@ee05e7a
            Accept: 'application/json'
            VCR-index: '0'
    response:
        status:
            http_version: '1.1'
            code: '200'
            message: OK
        headers:
            Server: nginx
            Content-Type: application/json
            Transfer-Encoding: chunked
            Connection: keep-alive
            X-Powered-By: PHP/7.4.13
            Cache-Control: 'no-cache, private'
            Date: 'Wed, 14 Apr 2021 15:39:24 GMT'
            Content-Language: fr
            Access-Control-Allow-Origin: '*'
            X-Debug-Token: 1ba2b4
            X-Debug-Token-Link: 'http://wizaplace.loc/_profiler/1ba2b4'
            X-Robots-Tag: noindex
            X-Request-Id: 6e69d23412eafed9dbfa33cf0727d7cd
        body: '{"id":6,"apiKey":"XnXweXQxJuJHvdj5wH3IDXzeMcfbWfd8J8UceLX8"}'
-
    request:
        method: GET
        url: 'http://wizaplace.loc/api/v1/promotions/basket'
        headers:
            Host: wizaplace.loc
            Accept-Encoding: null
            User-Agent: Wizaplace-PHP-SDK/dev-feature-WIZ-8293-discount-on-quantity@ee05e7a
            Authorization: 'token XnXweXQxJuJHvdj5wH3IDXzeMcfbWfd8J8UceLX8'
            Accept: 'application/json'
            VCR-index: '1'
    response:
        status:
            http_version: '1.1'
            code: '200'
            message: OK
        headers:
            Server: nginx
            Content-Type: application/json
            Transfer-Encoding: chunked
            Connection: keep-alive
            X-Powered-By: PHP/7.4.13
            Cache-Control: 'no-cache, private'
            Date: 'Wed, 14 Apr 2021 15:39:24 GMT'
            Content-Language: fr
            Access-Control-Allow-Origin: '*'
            X-Debug-Token: aa1339
            X-Debug-Token-Link: 'http://wizaplace.loc/_profiler/aa1339'
            X-Robots-Tag: noindex
            X-Request-Id: 0f2693c113e7f7d0825dd71f874fc835
        body: '{"promotions":[{"promotion_id":"9047e1b2-785a-48e3-a455-8eda989ef864","name":"test promotion","active":true,"isValid":true,"rule":{"type":"and","items":[{"type":"basket_price_superior_to","value":3.13},{"type":"basket_price_inferior_to","value":3.15},{"type":"or","items":[{"type":"basket_has_product_in_list","products_ids":[1,2,3]},{"type":"basket_has_product_in_list","products_ids":[4,5,7]}]},{"type":"max_usage_count","value":100},{"type":"max_usage_count_per_user","value":1}]},"ruleString":"((totalAmount \u003E 3.13) and (totalAmount \u003C 3.15) and ((products intersects [1,2,3]) or (products intersects [4,5,7])) and (usageCount \u003C 100) and (userUsageCount \u003C 1))","period":{"from":"1992-09-07T00:00:00+00:00","to":"2019-01-01T00:00:00+00:00"},"discounts":[{"type":"percentage","percentage":2},{"type":"fixed","value":3.5}],"target":{"type":"product_in_basket;1,4,7"},"coupon":null,"company_id":3},{"promotion_id":"ae08f0a9-7dd2-424b-8194-0438f1248198","name":"test promotion","active":true,"isValid":true,"rule":{"type":"and","items":[{"type":"basket_price_superior_to","value":3.13},{"type":"basket_price_inferior_to","value":3.15},{"type":"or","items":[{"type":"basket_has_product_in_list","products_ids":[1,2,3]},{"type":"basket_has_product_in_list","products_ids":[4,5,7]}]},{"type":"max_usage_count","value":100},{"type":"max_usage_count_per_user","value":1}]},"ruleString":"((totalAmount \u003E 3.13) and (totalAmount \u003C 3.15) and ((products intersects [1,2,3]) or (products intersects [4,5,7])) and (usageCount \u003C 100) and (userUsageCount \u003C 1))","period":{"from":"1992-09-07T00:00:00+00:00","to":"2019-01-01T00:00:00+00:00"},"discounts":[{"type":"percentage","percentage":2},{"type":"fixed","value":3.5}],"target":{"type":"basket"},"coupon":null,"company_id":3},{"promotion_id":"b4d8c861-64e3-495b-ad1e-4e4d12ec5d62","name":"test promotion","active":true,"isValid":true,"rule":{"type":"and","items":[{"type":"basket_quantity_superior_or_equal_to","value":10},{"type":"basket_quantity_inferior_or_equal_to","value":12}]},"ruleString":"((totalQuantity \u003E= 10) and (totalQuantity \u003C= 12))","period":{"from":"1992-09-07T00:00:00+00:00","to":"2019-01-01T00:00:00+00:00"},"discounts":[{"type":"percentage","percentage":2},{"type":"fixed","value":3.5}],"target":{"type":"product_in_basket;1,4,7"},"coupon":null,"company_id":3},{"promotion_id":"c2f026bf-e516-48d5-846f-190297ee866f","name":"test promotion","active":true,"isValid":true,"rule":{"type":"and","items":[{"type":"basket_price_superior_to","value":3.13},{"type":"basket_price_inferior_to","value":3.15},{"type":"or","items":[{"type":"basket_has_product_in_list","products_ids":[1,2,3]},{"type":"basket_has_product_in_list","products_ids":[4,5,7]}]},{"type":"max_usage_count","value":100},{"type":"max_usage_count_per_user","value":1}]},"ruleString":"((totalAmount \u003E 3.13) and (totalAmount \u003C 3.15) and ((products intersects [1,2,3]) or (products intersects [4,5,7])) and (usageCount \u003C 100) and (userUsageCount \u003C 1))","period":{"from":"1992-09-07T00:00:00+00:00","to":"2019-01-01T00:00:00+00:00"},"discounts":[{"type":"percentage","percentage":2},{"type":"fixed","value":3.5}],"target":{"type":"shipping"},"coupon":null,"company_id":3}]}'
-
    request:
        method: POST
        url: 'http://wizaplace.loc/api/v1/promotions/basket'
        headers:
            Host: wizaplace.loc
            Expect: null
            Accept-Encoding: null
            Content-Type: application/json
            User-Agent: Wizaplace-PHP-SDK/dev-feature-WIZ-8293-discount-on-quantity@ee05e7a
            Authorization: 'token XnXweXQxJuJHvdj5wH3IDXzeMcfbWfd8J8UceLX8'
            Accept: 'application/json'
            VCR-index: '2'
        body: '{"name":"test promotion without rules","active":true,"discounts":[{"type":"fixed","value":3.5,"maxAmount":null}],"period":{"from":"2010-01-01T00:00:00+00:00","to":"2025-01-01T00:00:00+00:00"},"target":{"type":"basket"}}'
    response:
        status:
            http_version: '1.1'
            code: '200'
            message: OK
        headers:
            Server: nginx
            Content-Type: application/json
            Transfer-Encoding: chunked
            Connection: keep-alive
            X-Powered-By: PHP/7.4.13
            Cache-Control: 'no-cache, private'
            Date: 'Wed, 14 Apr 2021 15:39:24 GMT'
            Content-Language: fr
            Access-Control-Allow-Origin: '*'
            X-Debug-Token: a1b5c4
            X-Debug-Token-Link: 'http://wizaplace.loc/_profiler/a1b5c4'
            X-Robots-Tag: noindex
            X-Request-Id: 3888739fd5db80a1bc86be8dd618d97c
        body: '{"promotion_id":"847000ae-fafd-4292-9314-d6f5092fd462","name":"test promotion without rules","active":true,"isValid":true,"rule":null,"ruleString":"","period":{"from":"2010-01-01T00:00:00+00:00","to":"2025-01-01T00:00:00+00:00"},"discounts":[{"type":"fixed","value":3.5}],"target":{"type":"basket"},"coupon":null,"company_id":3}'
-
    request:
        method: GET
        url: 'http://wizaplace.loc/api/v1/promotions/basket'
        headers:
            Host: wizaplace.loc
            Accept-Encoding: null
            User-Agent: Wizaplace-PHP-SDK/dev-feature-WIZ-8293-discount-on-quantity@ee05e7a
            Authorization: 'token XnXweXQxJuJHvdj5wH3IDXzeMcfbWfd8J8UceLX8'
            Accept: 'application/json'
            VCR-index: '3'
    response:
        status:
            http_version: '1.1'
            code: '200'
            message: OK
        headers:
            Server: nginx
            Content-Type: application/json
            Transfer-Encoding: chunked
            Connection: keep-alive
            X-Powered-By: PHP/7.4.13
            Cache-Control: 'no-cache, private'
            Date: 'Wed, 14 Apr 2021 15:39:24 GMT'
            Content-Language: fr
            Access-Control-Allow-Origin: '*'
            X-Debug-Token: 3a6ae9
            X-Debug-Token-Link: 'http://wizaplace.loc/_profiler/3a6ae9'
            X-Robots-Tag: noindex
            X-Request-Id: 95b001fba5f1b5d47a8c7319d751853e
        body: '{"promotions":[{"promotion_id":"847000ae-fafd-4292-9314-d6f5092fd462","name":"test promotion without rules","active":true,"isValid":true,"rule":null,"ruleString":"","period":{"from":"2010-01-01T00:00:00+00:00","to":"2025-01-01T00:00:00+00:00"},"discounts":[{"type":"fixed","value":3.5}],"target":{"type":"basket"},"coupon":null,"company_id":3},{"promotion_id":"9047e1b2-785a-48e3-a455-8eda989ef864","name":"test promotion","active":true,"isValid":true,"rule":{"type":"and","items":[{"type":"basket_price_superior_to","value":3.13},{"type":"basket_price_inferior_to","value":3.15},{"type":"or","items":[{"type":"basket_has_product_in_list","products_ids":[1,2,3]},{"type":"basket_has_product_in_list","products_ids":[4,5,7]}]},{"type":"max_usage_count","value":100},{"type":"max_usage_count_per_user","value":1}]},"ruleString":"((totalAmount \u003E 3.13) and (totalAmount \u003C 3.15) and ((products intersects [1,2,3]) or (products intersects [4,5,7])) and (usageCount \u003C 100) and (userUsageCount \u003C 1))","period":{"from":"1992-09-07T00:00:00+00:00","to":"2019-01-01T00:00:00+00:00"},"discounts":[{"type":"percentage","percentage":2},{"type":"fixed","value":3.5}],"target":{"type":"product_in_basket;1,4,7"},"coupon":null,"company_id":3},{"promotion_id":"ae08f0a9-7dd2-424b-8194-0438f1248198","name":"test promotion","active":true,"isValid":true,"rule":{"type":"and","items":[{"type":"basket_price_superior_to","value":3.13},{"type":"basket_price_inferior_to","value":3.15},{"type":"or","items":[{"type":"basket_has_product_in_list","products_ids":[1,2,3]},{"type":"basket_has_product_in_list","products_ids":[4,5,7]}]},{"type":"max_usage_count","value":100},{"type":"max_usage_count_per_user","value":1}]},"ruleString":"((totalAmount \u003E 3.13) and (totalAmount \u003C 3.15) and ((products intersects [1,2,3]) or (products intersects [4,5,7])) and (usageCount \u003C 100) and (userUsageCount \u003C 1))","period":{"from":"1992-09-07T00:00:00+00:00","to":"2019-01-01T00:00:00+00:00"},"discounts":[{"type":"percentage","percentage":2},{"type":"fixed","value":3.5}],"target":{"type":"basket"},"coupon":null,"company_id":3},{"promotion_id":"b4d8c861-64e3-495b-ad1e-4e4d12ec5d62","name":"test promotion","active":true,"isValid":true,"rule":{"type":"and","items":[{"type":"basket_quantity_superior_or_equal_to","value":10},{"type":"basket_quantity_inferior_or_equal_to","value":12}]},"ruleString":"((totalQuantity \u003E= 10) and (totalQuantity \u003C= 12))","period":{"from":"1992-09-07T00:00:00+00:00","to":"2019-01-01T00:00:00+00:00"},"discounts":[{"type":"percentage","percentage":2},{"type":"fixed","value":3.5}],"target":{"type":"product_in_basket;1,4,7"},"coupon":null,"company_id":3},{"promotion_id":"c2f026bf-e516-48d5-846f-190297ee866f","name":"test promotion","active":true,"isValid":true,"rule":{"type":"and","items":[{"type":"basket_price_superior_to","value":3.13},{"type":"basket_price_inferior_to","value":3.15},{"type":"or","items":[{"type":"basket_has_product_in_list","products_ids":[1,2,3]},{"type":"basket_has_product_in_list","products_ids":[4,5,7]}]},{"type":"max_usage_count","value":100},{"type":"max_usage_count_per_user","value":1}]},"ruleString":"((totalAmount \u003E 3.13) and (totalAmount \u003C 3.15) and ((products intersects [1,2,3]) or (products intersects [4,5,7])) and (usageCount \u003C 100) and (userUsageCount \u003C 1))","period":{"from":"1992-09-07T00:00:00+00:00","to":"2019-01-01T00:00:00+00:00"},"discounts":[{"type":"percentage","percentage":2},{"type":"fixed","value":3.5}],"target":{"type":"shipping"},"coupon":null,"company_id":3}]}'
